<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>–í–∏–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞ –º–∏—Ä–∞ | Professional</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts: Montserrat -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* ==========================================
           –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò
           ========================================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            height: 100%;
            width: 100%;
            overflow: hidden;
            font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, sans-serif;
            font-weight: 400;
        }

        body {
            background: #f8f9fa;
            color: #212529;
        }

        /* ==========================================
           –í–ï–†–•–ù–Ø–Ø –ü–ê–ù–ï–õ–¨
           ========================================== */
        .top-filters {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 70px;
            background: rgba(114, 47, 55, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1500;
            display: flex;
            align-items: center;
            padding: 0 16px;
            gap: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .top-filters h2 {
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            margin-right: auto;
        }

        /* –ö–Ω–æ–ø–∫–∞-–±—É—Ä–≥–µ—Ä —Å —Ñ–∏–ª—å—Ç—Ä–æ–º */
        .filter-burger {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .filter-burger:hover {
            background: rgba(255,255,255,0.3);
        }

        .filter-burger.active {
            background: white;
            color: #722f37;
        }

        /* –ü–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤ */
        .filters-panel {
            position: fixed;
            top: 70px;
            left: 0;
            right: 0;
            background: white;
            max-height: 70vh;
            overflow-y: auto;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            z-index: 1499;
            display: none;
            border-radius: 0 0 12px 12px;
        }

        .filters-panel.active {
            display: block;
        }

        /* ==========================================
           –ö–û–ù–¢–ï–ô–ù–ï–† –ö–ê–†–¢–´
           ========================================== */
        #map-container {
            position: fixed;
            top: 70px;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1;
        }

        #map {
            width: 100%;
            height: 100%;
            background: #e0e0e0;
            z-index: 1;
        }

        /* –ö–∞—Å—Ç–æ–º–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã */
        .custom-marker {
            background: #722f37;
            border: 3px solid white;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 1.1rem;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            transition: transform 0.2s;
        }

        /* ==========================================
           –ú–û–ë–ò–õ–¨–ù–ê–Ø –ü–ê–ù–ï–õ–¨ –° –í–ò–ù–ê–ú–ò
           ========================================== */
        .wine-panel-mobile {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 65vh;
            max-height: 100vh;
            background: white;
            border-radius: 20px 20px 0 0;
            transform: translateY(100%);
            transition: none;
            z-index: 2000;
            display: flex;
            flex-direction: column;
            box-shadow: 0 -5px 25px rgba(0,0,0,0.25);
        }

        .wine-panel-mobile.active {
            transform: translateY(0);
        }

        .wine-panel-mobile.expanded {
            height: 100vh;
            border-radius: 0;
        }

        .mobile-handle {
            width: 50px;
            height: 5px;
            background: #d4b483;
            border-radius: 3px;
            margin: 12px auto;
            cursor: grab;
            transition: background 0.2s;
        }

        .mobile-handle:active {
            cursor: grabbing;
            background: #b8935f;
        }

        /* –û–≤–µ—Ä–ª–µ–π */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.6);
            z-index: 1999;
            display: none;
            opacity: 0;
            transition: opacity 0.3s;
            backdrop-filter: blur(5px);
        }

        .overlay.active {
            display: block;
            opacity: 1;
        }

        /* ==========================================
           –§–ò–õ–¨–¢–†–´ –í –ü–ê–ù–ï–õ–ò
           ========================================== */
        .filters-container {
            padding: 15px;
            background: #f8f5f0;
            border-bottom: 1px solid #e8ddd4;
            flex-shrink: 0;
        }

        .filter-section {
            padding: 15px;
            border-bottom: 1px solid #e8ddd4;
        }

        .filter-section:last-child {
            border-bottom: none;
        }

        .filter-section h4 {
            font-size: 0.85rem;
            color: #722f37;
            margin-bottom: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .filter-btn {
            padding: 6px 12px;
            border: 1px solid #d4b483;
            background: white;
            border-radius: 16px;
            cursor: pointer;
            font-size: 0.75rem;
            white-space: nowrap;
            transition: all 0.2s;
            flex-shrink: 0;
            font-weight: 500;
            font-family: 'Montserrat', sans-serif;
        }

        .filter-btn:hover {
            background: #f0e6d3;
        }

        .filter-btn.active {
            background: #722f37;
            color: white;
            border-color: #722f37;
        }

        /* –ö–Ω–æ–ø–∫–∞ –æ—á–∏—Å—Ç–∫–∏ */
        .clear-filters-btn {
            width: 100%;
            background: #722f37;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 10px;
        }

        .clear-filters-btn:hover {
            background: #5a252c;
        }

        /* ==========================================
           –°–ü–ò–°–û–ö –í–ò–ù
           ========================================== */
        .wine-list-content {
            flex: 1;
            overflow-y: auto;
            padding: 0 15px;
            -webkit-overflow-scrolling: touch;
        }

        .placeholder {
            padding: 40px 20px;
            text-align: center;
            color: #a09080;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .placeholder i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #d4b483;
        }

        .placeholder p {
            font-size: 0.9rem;
            margin: 0;
            font-weight: 500;
        }

        .country-section {
            padding-bottom: 20px;
        }

        .country-title {
            position: sticky;
            top: 0;
            background: white;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
            color: #722f37;
            padding: 15px 0;
            border-bottom: 2px solid #f0e6d3;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .wine-category {
            margin-bottom: 20px;
        }

        .category-title {
            font-size: 0.95rem;
            color: #5a4a30;
            margin: 15px 0 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∞ –≤–∏–Ω–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º */
        .wine-card {
            background: #f8f5f0;
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 4px solid #d4b483;
            display: flex;
            gap: 12px;
        }

        .wine-card:active {
            transform: scale(0.98);
            background: #f0e6d3;
        }

        .wine-image {
            width: 60px;
            height: 80px;
            border-radius: 8px;
            object-fit: cover;
            flex-shrink: 0;
            background: #e8ddd4;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.6rem;
            color: #8a7462;
            text-align: center;
        }

        .wine-image img {
            width: 100%;
            height: 100%;
            border-radius: 8px;
            object-fit: cover;
        }

        .wine-info {
            flex: 1;
            min-width: 0;
        }

        .wine-name {
            font-weight: 600;
            color: #3d2914;
            margin-bottom: 3px;
            font-size: 0.9rem;
        }

        .wine-producer {
            font-size: 0.8rem;
            color: #8a7462;
            margin-bottom: 2px;
            font-style: italic;
            font-weight: 400;
        }

        .wine-region {
            font-size: 0.85rem;
            color: #8a7462;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 4px;
            font-weight: 400;
        }

        .wine-region i {
            font-size: 0.7rem;
        }

        .wine-stats {
            display: flex;
            gap: 8px;
            align-items: center;
            margin-bottom: 6px;
            flex-wrap: wrap;
        }

        .wine-sweetness {
            display: inline-block;
            font-size: 0.7rem;
            padding: 3px 8px;
            border-radius: 10px;
            background: #e8ddd4;
            color: #5a4a30;
            font-weight: 500;
        }

        .wine-alcohol {
            font-size: 0.7rem;
            color: #722f37;
            font-weight: 600;
        }

        .wine-price {
            font-size: 0.75rem;
            color: #28a745;
            font-weight: 600;
        }

        .wine-description {
            font-size: 0.8rem;
            color: #6d5d4b;
            line-height: 1.4;
            margin-top: 6px;
            font-weight: 400;
        }

        .wine-details {
            display: none;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid #e8ddd4;
        }

        .wine-details.active {
            display: block;
        }

        .detail-item {
            font-size: 0.75rem;
            margin-bottom: 3px;
            line-height: 1.3;
            color: #5a4a30;
            font-weight: 400;
        }

        .detail-item strong {
            color: #722f37;
            font-weight: 600;
        }

        /* ==========================================
           –ò–ö–û–ù–ö–ò
           ========================================== */
        .icon-sparkling { color: #f1c40f; }
        .icon-red { color: #c0392b; }
        .icon-white { color: #f39c12; }
        .icon-orange { color: #e67e22; }
        .icon-rose { color: #e74c3c; }
        .icon-fruit { color: #9b59b6; }
        .icon-nonalc { color: #3498db; }

        /* ==========================================
           –û–®–ò–ë–ö–ò
           ========================================== */
        .error-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            text-align: center;
            z-index: 3000;
            display: none;
            font-family: 'Montserrat', sans-serif;
        }

        .error-message.active {
            display: block;
        }

        .error-message button {
            margin-top: 15px;
            background: #722f37;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
        }

        /* ==========================================
           –î–ï–°–ö–¢–û–ü–ù–ê–Ø –í–ï–†–°–ò–Ø
           ========================================== */
        @media (min-width: 769px) {
            .top-filters {
                display: none;
            }

            #map-container {
                top: 0;
            }

            .wine-panel-mobile, .overlay {
                display: none !important;
            }

            .desktop-panel {
                position: fixed;
                right: 0;
                top: 0;
                bottom: 0;
                width: 420px;
                background: white;
                box-shadow: -2px 0 15px rgba(0,0,0,0.1);
                display: flex;
                flex-direction: column;
                z-index: 1000;
            }

            .desktop-panel .filters-container {
                flex-shrink: 0;
            }

            .desktop-panel .wine-list-content {
                padding: 0 20px;
            }
        }
    </style>
</head>
<body>
    <!-- ==========================================
         –í–ï–†–•–ù–Ø–Ø –ü–ê–ù–ï–õ–¨ –° –ë–£–†–ì–ï–†-–ú–ï–ù–Æ
         ========================================== -->
    <div class="top-filters">
        <h2>üç∑ –í–∏–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞ –º–∏—Ä–∞</h2>
        <button class="filter-burger" id="filterBurger">
            <i class="fas fa-filter"></i>
        </button>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤ (–≤—ã–ø–∞–¥–∞—é—â–∞—è) -->
    <div class="filters-panel" id="filtersPanel">
        <div class="filter-section">
            <h4>–°—Ç—Ä–∞–Ω–∞</h4>
            <div class="filter-buttons" id="countryFilters">
                <button class="filter-btn active" data-filter-type="country" data-filter-value="all">–í—Å–µ —Å—Ç—Ä–∞–Ω—ã</button>
            </div>
        </div>
        
        <div class="filter-section">
            <h4>–¶–≤–µ—Ç –≤–∏–Ω–∞</h4>
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter-type="color" data-filter-value="all">–í—Å–µ</button>
                <button class="filter-btn" data-filter-type="color" data-filter-value="–∫—Ä–∞—Å–Ω–æ–µ">–ö—Ä–∞—Å–Ω–æ–µ</button>
                <button class="filter-btn" data-filter-type="color" data-filter-value="–±–µ–ª–æ–µ">–ë–µ–ª–æ–µ</button>
                <button class="filter-btn" data-filter-type="color" data-filter-value="–¥—Ä—É–≥–æ–µ">–î—Ä—É–≥–æ–µ</button>
            </div>
        </div>
        
        <div class="filter-section">
            <h4>–°–ª–∞–¥–æ—Å—Ç—å</h4>
            <div class="filter-buttons" id="sweetnessFilters">
                <button class="filter-btn active" data-filter-type="sweetness" data-filter-value="all">–í—Å–µ</button>
                <button class="filter-btn" data-filter-type="sweetness" data-filter-value="–°—É—Ö–æ–µ">–°—É—Ö–æ–µ</button>
                <button class="filter-btn" data-filter-type="sweetness" data-filter-value="–ü–æ–ª—É—Å—É—Ö–æ–µ">–ü–æ–ª—É—Å—É—Ö–æ–µ</button>
                <button class="filter-btn" data-filter-type="sweetness" data-filter-value="–ü–æ–ª—É—Å–ª–∞–¥–∫–æ–µ">–ü–æ–ª—É—Å–ª–∞–¥–∫–æ–µ</button>
                <button class="filter-btn" data-filter-type="sweetness" data-filter-value="–°–ª–∞–¥–∫–æ–µ">–°–ª–∞–¥–∫–æ–µ</button>
                <button class="filter-btn" data-filter-type="sweetness" data-filter-value="–ë—Ä—é—Ç">–ë—Ä—é—Ç</button>
                <button class="filter-btn" data-filter-type="sweetness" data-filter-value="–ò–≥—Ä–∏—Å—Ç–æ–µ">–ò–≥—Ä–∏—Å—Ç–æ–µ</button>
                <button class="filter-btn" data-filter-type="sweetness" data-filter-value="–û—Ä–∞–Ω–∂–µ–≤–æ–µ">–û—Ä–∞–Ω–∂–µ–≤–æ–µ</button>
            </div>
        </div>
        
        <div class="filter-section">
            <h4>–¶–µ–Ω–æ–≤–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω (‚ÇΩ)</h4>
            <input type="range" class="price-range" id="minPrice" min="0" max="5000" value="0">
            <input type="range" class="price-range" id="maxPrice" min="0" max="5000" value="5000">
            <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                <span id="minPriceLabel">0 ‚ÇΩ</span>
                <span id="maxPriceLabel">5000 ‚ÇΩ</span>
            </div>
        </div>
        
        <div class="filter-section">
            <button class="clear-filters-btn" onclick="resetAllFilters()">
                <i class="fas fa-undo"></i> –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã
            </button>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞—Ä—Ç—ã -->
    <div id="map-container">
        <div id="map"></div>
    </div>

    <!-- –ú–æ–±–∏–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
    <div class="wine-panel-mobile" id="winePanelMobile">
        <div class="mobile-handle"></div>
        <div class="filters-container" id="filtersContainer">
            <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã -->
        </div>
        <div class="wine-list-content">
            <div class="placeholder" id="placeholderMobile">
                <i class="fas fa-map-marked-alt"></i>
                <p>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω—É –Ω–∞ –∫–∞—Ä—Ç–µ</p>
            </div>
            <div id="wineListMobile" style="display: none;"></div>
        </div>
    </div>

    <!-- –û–≤–µ—Ä–ª–µ–π -->
    <div class="overlay" id="overlay"></div>

    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ -->
    <div class="error-message" id="errorMessage">
        <i class="fas fa-exclamation-triangle" style="color: #c0392b; font-size: 2rem; margin-bottom: 10px;"></i>
        <p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞—Ä—Ç—É –∏–ª–∏ –≤–∏–Ω–∞</p>
        <button onclick="location.reload()">–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å</button>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>

    <script>
        // ==========================================
        // –ë–ê–ó–ê –î–ê–ù–ù–´–• –í–ò–ù
        // ==========================================
        const wineData = {
            "–†–æ—Å—Å–∏—è": {
                coords: [45.3, 36.8],
                wines: [
                    {
                        type: "–¥–æ–º–∞—à–Ω–∏–µ", color: "–∫—Ä–∞—Å–Ω–æ–µ", name: "–ú–∞–∫–∏—Ç—Ä–∞ –ö—Ä–∞—Å–Ω–æ–µ",
                        producer: "–¢–∞–º–∞–Ω—Å–∫–∏–π –ø–æ–ª—É–æ—Å—Ç—Ä–æ–≤", region: "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π",
                        grape: "–ö—Ä–∞—Å–Ω—ã–µ –º–µ—Å—Ç–Ω—ã–µ —Å–æ—Ä—Ç–∞", sweetness: "–°—É—Ö–æ–µ/–ü–æ–ª—É—Å–ª–∞–¥–∫–æ–µ",
                        alcohol: "11-13%", price: 450, image: "makitra_red.png",
                        description: "–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–µ –¥–æ–º–∞—à–Ω–µ–µ –≤–∏–Ω–æ –∏–∑ –ö—É–±–∞–Ω–∏. –ù–∞—Å—ã—â–µ–Ω–Ω—ã–π —Ä—É–±–∏–Ω–æ–≤—ã–π —Ü–≤–µ—Ç —Å —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–º–∏ –æ—Ç–±–ª–µ—Å–∫–∞–º–∏. –ê—Ä–æ–º–∞—Ç —á–µ—Ä–Ω–æ–π —Å–º–æ—Ä–æ–¥–∏–Ω—ã, –≤–∏—à–Ω–∏ –∏ —Å–ø–µ—Ü–∏–π. –¢–µ–ª–æ —Å—Ä–µ–¥–Ω–µ–µ, —Ç–∞–Ω–∏–Ω—ã –º—è–≥–∫–∏–µ. –ò–¥–µ–∞–ª—å–Ω–æ –∫ –º—è—Å—É, –∫–æ–ª–±–∞—Å–∞–º –∏ —Å—ã—Ä–∞–º."
                    },
                    {
                        type: "–¥–æ–º–∞—à–Ω–∏–µ", color: "–±–µ–ª–æ–µ", name: "–ú–∞–∫–∏—Ç—Ä–∞ –ë–µ–ª–æ–µ",
                        producer: "–¢–∞–º–∞–Ω—Å–∫–∏–π –ø–æ–ª—É–æ—Å—Ç—Ä–æ–≤", region: "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π",
                        grape: "–ë–µ–ª—ã–µ –º–µ—Å—Ç–Ω—ã–µ —Å–æ—Ä—Ç–∞", sweetness: "–°—É—Ö–æ–µ/–ü–æ–ª—É—Å–ª–∞–¥–∫–æ–µ",
                        alcohol: "10-12%", price: 450, image: "makitra_white.png",
                        description: "–°–≤–µ—Ç–ª–æ–µ –¥–æ–º–∞—à–Ω–µ–µ –≤–∏–Ω–æ —Å –∑–æ–ª–æ—Ç–∏—Å—Ç—ã–º –æ—Ç—Ç–µ–Ω–∫–æ–º. –ê—Ä–æ–º–∞—Ç —Ü–≤–µ—Ç–æ—á–Ω—ã–π —Å –Ω–æ—Ç–∞–º–∏ –±–µ–ª—ã—Ö —è–≥–æ–¥ –∏ –º–∏–Ω–µ—Ä–∞–ª—å–Ω–æ—Å—Ç—å—é. –°–≤–µ–∂–∏–π, –ª–µ–≥–∫–∏–π –≤–∫—É—Å —Å —Ö–æ—Ä–æ—à–µ–π –∫–∏—Å–ª–æ—Ç–Ω–æ—Å—Ç—å—é. –ü–æ–¥—Ö–æ–¥–∏—Ç –∫ —Ä—ã–±–µ, –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∞–º –∏ —Å–∞–ª–∞—Ç–∞–º."
                    },
                    {
                        type: "–∏–≥—Ä–∏—Å—Ç—ã–µ", color: "–¥—Ä—É–≥–æ–µ", name: "–ú–∞–∫–∏—Ç—Ä–∞ –ë—Ä—é—Ç",
                        producer: "–¢–∞–º–∞–Ω—Å–∫–∏–π –ø–æ–ª—É–æ—Å—Ç—Ä–æ–≤", region: "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π",
                        grape: "–ê–ª–∏–≥–æ—Ç–µ, –†–∏—Å–ª–∏–Ω–≥", sweetness: "–ë—Ä—é—Ç",
                        alcohol: "11.5%", price: 650, image: "makitra_brut.png",
                        description: "–†–æ—Å—Å–∏–π—Å–∫–æ–µ –∏–≥—Ä–∏—Å—Ç–æ–µ –≤–∏–Ω–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–º –º–µ—Ç–æ–¥–æ–º. –¢–æ–Ω–∫–∞—è –ø–µ—Ä–ª—è–∂, —Å–≤–µ–∂–∏–π —Ü–∏—Ç—Ä—É—Å–æ–≤—ã–π –∞—Ä–æ–º–∞—Ç —Å –Ω–æ—Ç–∞–º–∏ –∑–µ–ª–µ–Ω–æ–≥–æ —è–±–ª–æ–∫–∞. –≠–ª–µ–≥–∞–Ω—Ç–Ω—ã–π –∞–ø–µ—Ä–∏—Ç–∏–≤, –æ—Ç–ª–∏—á–Ω–æ —Å–æ—á–µ—Ç–∞–µ—Ç—Å—è —Å —Ñ—Ä—É–∫—Ç–∞–º–∏ –∏ –¥–µ—Å–µ—Ä—Ç–∞–º–∏."
                    },
                    {
                        type: "–±–µ–ª—ã–µ", color: "–±–µ–ª–æ–µ", name: "–§–ª—ë—Ä –î—é –°—é–¥ –ë–µ–ª–æ–µ",
                        producer: "–¢–∞–º–∞–Ω—Å–∫–∏–π –ø–æ–ª—É–æ—Å—Ç—Ä–æ–≤", region: "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π",
                        grape: "–ê–ª–∏–≥–æ—Ç–µ, –°–æ–≤–∏–Ω—å–æ–Ω –ë–ª–∞–Ω", sweetness: "–°—É—Ö–æ–µ",
                        alcohol: "12%", price: 550, image: "fleur_du_sud.png",
                        description: "–≠–ª–µ–≥–∞–Ω—Ç–Ω–æ–µ –±–µ–ª–æ–µ –≤–∏–Ω–æ —Å –º–∏–Ω–µ—Ä–∞–ª—å–Ω—ã–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–º. –ê—Ä–æ–º–∞—Ç —Ü–∏—Ç—Ä—É—Å–æ–≤—ã—Ö, –±–µ–ª—ã—Ö —Ü–≤–µ—Ç–æ–≤ –∏ —Å–≤–µ–∂–µ–≥–æ —Ö–ª–µ–±–∞. –°—Ä–µ–¥–Ω–µ–µ —Ç–µ–ª–æ, —Ö–æ—Ä–æ—à–∞—è –∫–∏—Å–ª–æ—Ç–Ω–æ—Å—Ç—å. –ò–¥–µ–∞–ª—å–Ω–æ –∫ —Ä–∞–∫—É—à–∫–∞–º, –ø–∞—Å—Ç–µ –∏ –æ–≤–æ—â–Ω—ã–º —Å–∞–ª–∞—Ç–∞–º."
                    },
                    {
                        type: "–æ—Ä–∞–Ω–∂–µ–≤—ã–µ", color: "–¥—Ä—É–≥–æ–µ", name: "–ú—É—Å–∫–∞—Ç –≠—Å—Å–µ –ê–Ω–ø–ª–∞–Ω–≥ –û—Ä–∞–Ω–∂",
                        producer: "–ú–∞—Å—Å–∞–Ω–¥—Ä–∞", region: "–ö—Ä—ã–º—Å–∫–∏–π –ø–æ–ª—É–æ—Å—Ç—Ä–æ–≤",
                        grape: "–ú—É—Å–∫–∞—Ç", sweetness: "–û—Ä–∞–Ω–∂–µ–≤–æ–µ",
                        alcohol: "13%", price: 890, image: "essee_muscat_orange.png",
                        description: "–£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –æ—Ä–∞–Ω–∂–µ–≤–æ–µ –≤–∏–Ω–æ –∏–∑ –ö—Ä—ã–º–∞. –î–ª–∏—Ç–µ–ª—å–Ω–∞—è –º–∞—Ü–µ—Ä–∞—Ü–∏—è –Ω–∞ —à–∫—É—Ä–∫–µ –ø—Ä–∏–¥–∞–µ—Ç –º–µ–¥–æ–≤—ã–π —Ü–≤–µ—Ç –∏ –Ω–∞—Å—ã—â–µ–Ω–Ω—ã–π –∞—Ä–æ–º–∞—Ç. –¢—Ä–æ–ø–∏—á–µ—Å–∫–∏–µ —Ñ—Ä—É–∫—Ç—ã, —Ü–≤–µ—Ç—ã, —Å–ø–µ—Ü–∏–∏. –ö —ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–æ–π –∫—É—Ö–Ω–µ –∏ —Å—ã—Ä–∞–º."
                    },
                    {
                        type: "–∫—Ä–∞—Å–Ω—ã–µ", color: "–∫—Ä–∞—Å–Ω–æ–µ", name: "–í—ã—Å–æ–∫–∏–π –±–µ—Ä–µ–≥ –°–∏—Ä–∞",
                        producer: "–í—ã—Å–æ–∫–∏–π –±–µ—Ä–µ–≥", region: "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π",
                        grape: "–°–∏—Ä–∞ (–®–∏—Ä–∞–∑)", sweetness: "–°—É—Ö–æ–µ",
                        alcohol: "13.5%", price: 720, image: "high_bank_syrah.png",
                        description: "–¢–µ–º–Ω–æ–µ –∫—Ä–∞—Å–Ω–æ–µ –≤–∏–Ω–æ —Å –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–º –∞—Ä–æ–º–∞—Ç–æ–º —á–µ—Ä–Ω–æ–π —Å–º–æ—Ä–æ–¥–∏–Ω—ã, –≤–∏—à–Ω–∏ –∏ –ø–µ—Ä—Ü–∞. –ü–æ–ª–Ω–æ—Ç–µ–ª–æ–µ, —Å –±–∞—Ä—Ö–∞—Ç–∏—Å—Ç—ã–º–∏ —Ç–∞–Ω–∏–Ω–∞–º–∏. –û—Ç–ª–∏—á–Ω–æ –∫ —Å—Ç–µ–π–∫–∞–º, –¥–∏—á–∏ –∏ —Ç–µ–º–Ω–æ–º—É —à–æ–∫–æ–ª–∞–¥—É."
                    },
                    {
                        type: "—Ä–æ–∑–æ–≤—ã–µ", color: "–¥—Ä—É–≥–æ–µ", name: "–í—ã—Å–æ–∫–∏–π –±–µ—Ä–µ–≥ –¶–≤–∞–π–≥–µ–ª—å—Ç",
                        producer: "–í—ã—Å–æ–∫–∏–π –±–µ—Ä–µ–≥", region: "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π",
                        grape: "–¶–≤–∞–π–≥–µ–ª—å—Ç", sweetness: "–°—É—Ö–æ–µ",
                        alcohol: "12%", price: 680, image: "high_bank_zweigelt.png",
                        description: "–ù–µ–∂–Ω–æ–µ —Ä–æ–∑–æ–≤–æ–µ —Å –∞—Ä–æ–º–∞—Ç–æ–º –∫–ª—É–±–Ω–∏–∫–∏, –º–∞–ª–∏–Ω—ã –∏ —Ü–≤–µ—Ç–æ–≤. –õ–µ–≥–∫–æ–µ —Ç–µ–ª–æ, –æ—Å–≤–µ–∂–∞—é—â–∞—è –∫–∏—Å–ª–æ—Ç–Ω–æ—Å—Ç—å. –ò–¥–µ–∞–ª—å–Ω–æ–µ –ª–µ—Ç–Ω–µ–µ –≤–∏–Ω–æ, –æ—Ç–ª–∏—á–Ω–æ –∫ —Å–∞–ª–∞—Ç–∞–º, –ª–µ–≥–∫–∏–º –∑–∞–∫—É—Å–∫–∞–º –∏ –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∞–º."
                    }
                ]
            },
            "–ì—Ä—É–∑–∏—è": {
                coords: [42.0, 43.5],
                wines: [
                    {
                        type: "–∫—Ä–∞—Å–Ω—ã–µ", color: "–∫—Ä–∞—Å–Ω–æ–µ", name: "–°–∞–ø–µ—Ä–∞–≤–∏",
                        producer: "–ö–∏–Ω–¥–∑–º–∞—Ä–∞—É–ª–∏ –ú–∞—Ä–∞–Ω–∏", region: "–ö–∞—Ö–µ—Ç–∏—è",
                        grape: "–°–∞–ø–µ—Ä–∞–≤–∏", sweetness: "–°—É—Ö–æ–µ", alcohol: "12.5%",
                        price: 1200, image: "saperavi_km.png",
                        description: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ –≥—Ä—É–∑–∏–Ω—Å–∫–æ–µ –∫—Ä–∞—Å–Ω–æ–µ. –ì–ª—É–±–æ–∫–∏–π —Ä—É–±–∏–Ω–æ–≤—ã–π —Ü–≤–µ—Ç, –∞—Ä–æ–º–∞—Ç —á–µ—Ä–Ω–æ–π —Å–º–æ—Ä–æ–¥–∏–Ω—ã, –≤–∏—à–Ω–∏, —Å–ø–µ—Ü–∏–π. –ü–æ–ª–Ω–æ—Ç–µ–ª–æ–µ, —Å –±–∞—Ä—Ö–∞—Ç–∏—Å—Ç—ã–º–∏ —Ç–∞–Ω–∏–Ω–∞–º–∏. –ö –º—è—Å—É, —Å—ã—Ä–∞–º, —Ö–∏–Ω–∫–∞–ª–∏ –∏ –ø–ª–æ–≤—É."
                    },
                    {
                        type: "–∫—Ä–∞—Å–Ω—ã–µ", color: "–∫—Ä–∞—Å–Ω–æ–µ", name: "–ö–∏–Ω–¥–∑–º–∞—Ä–∞—É–ª–∏",
                        producer: "–ö–∏–Ω–¥–∑–º–∞—Ä–∞—É–ª–∏ –ú–∞—Ä–∞–Ω–∏", region: "–ö–∞—Ö–µ—Ç–∏—è, –ê–ª–∞–∑–∞–Ω—Å–∫–∞—è –¥–æ–ª–∏–Ω–∞",
                        grape: "–°–∞–ø–µ—Ä–∞–≤–∏", sweetness: "–ü–æ–ª—É—Å–ª–∞–¥–∫–æ–µ", alcohol: "11%",
                        price: 980, image: "kindzmarauli_km.png",
                        description: "–ó–Ω–∞–º–µ–Ω–∏—Ç–æ–µ –ø–æ–ª—É—Å–ª–∞–¥–∫–æ–µ –≤–∏–Ω–æ –∏–∑ –ê–ª–∞–∑–∞–Ω—Å–∫–æ–π –¥–æ–ª–∏–Ω—ã. –ù–∞—Å—ã—â–µ–Ω–Ω—ã–π —Ä—É–±–∏–Ω–æ–≤—ã–π —Ü–≤–µ—Ç, –∞—Ä–æ–º–∞—Ç —á–µ—Ä–µ—à–Ω–∏, –≤–∏—à–Ω–∏ –∏ —à–æ–∫–æ–ª–∞–¥–∞. –ú—è–≥–∫–∏–µ —Ç–∞–Ω–∏–Ω—ã, —Å–ª–∞–¥–∫–∏–π —Ñ–∏–Ω–∏—à. –ö –¥–µ—Å–µ—Ä—Ç–∞–º, —Ñ—Ä—É–∫—Ç–∞–º –∏ —Å–ª–æ–∂–Ω—ã–º —Å–æ—É—Å–∞–º."
                    },
                    {
                        type: "–æ—Ä–∞–Ω–∂–µ–≤—ã–µ", color: "–¥—Ä—É–≥–æ–µ", name: "–ë–µ—Å–∏–Ω–∏ –ö–≤–µ–≤—Ä–∏ –£–∞–π—Ç",
                        producer: "–ë–µ—Å–∏–Ω–∏", region: "–ö–∞—Ö–µ—Ç–∏—è",
                        grape: "–†–∫–∞—Ü–∏—Ç–µ–ª–∏, –ö–∏—Ö–∏—É—Ä–∏", sweetness: "–û—Ä–∞–Ω–∂–µ–≤–æ–µ", alcohol: "13.5%",
                        price: 1890, image: "besini_qvevri.png",
                        description: "–û—Ä–∞–Ω–∂–µ–≤–æ–µ –≤–∏–Ω–æ –≤ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–π –∫–≤–µ–≤—Ä–∏. 6 –º–µ—Å—è—Ü–µ–≤ –Ω–∞ —à–∫—É—Ä–∫–µ. –ù–∞—Å—ã—â–µ–Ω–Ω—ã–π —è–Ω—Ç–∞—Ä–Ω—ã–π —Ü–≤–µ—Ç, –∞—Ä–æ–º–∞—Ç —Ü–∏—Ç—Ä—É—Å–æ–≤—ã—Ö, –º–µ–¥–∞, –æ—Ä–µ—Ö–æ–≤ –∏ —Å–ø–µ—Ü–∏–π. –¢–∞–Ω–∏–Ω–Ω–æ–µ, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ. –ö —Ç–≤–µ—Ä–¥—ã–º —Å—ã—Ä–∞–º –∏ –æ–≤–æ—â–Ω—ã–º –±–ª—é–¥–∞–º."
                    },
                    {
                        type: "–±–µ–ª—ã–µ", color: "–±–µ–ª–æ–µ", name: "–ê–ª–∞–∑–∞–Ω—Å–∫–∞—è –î–æ–ª–∏–Ω–∞",
                        producer: "–ö–∏–Ω–¥–∑–º–∞—Ä–∞—É–ª–∏ –ú–∞—Ä–∞–Ω–∏", region: "–ö–∞—Ö–µ—Ç–∏—è, –ê–ª–∞–∑–∞–Ω—Å–∫–∞—è –¥–æ–ª–∏–Ω–∞",
                        grape: "–†–∫–∞—Ü–∏—Ç–µ–ª–∏", sweetness: "–ü–æ–ª—É—Å–ª–∞–¥–∫–æ–µ", alcohol: "11%",
                        price: 520, image: "alazani_valley.png",
                        description: "–ü–æ–ª—É—Å–ª–∞–¥–∫–æ–µ –±–µ–ª–æ–µ —Å –∑–æ–ª–æ—Ç–∏—Å—Ç—ã–º —Ü–≤–µ—Ç–æ–º. –ê—Ä–æ–º–∞—Ç —Ç—Ä–æ–ø–∏—á–µ—Å–∫–∏—Ö —Ñ—Ä—É–∫—Ç–æ–≤, –º–µ–¥–∞ –∏ —Ü–≤–µ—Ç–æ–≤. –°–≤–µ–∂–∏–π, —Ñ—Ä—É–∫—Ç–æ–≤—ã–π –≤–∫—É—Å —Å —Ö–æ—Ä–æ—à–µ–π –∫–∏—Å–ª–æ—Ç–Ω–æ—Å—Ç—å—é. –ö —Ñ—Ä—É–∫—Ç–∞–º, –¥–µ—Å–µ—Ä—Ç–∞–º –∏ –ª–µ–≥–∫–∏–º –∑–∞–∫—É—Å–∫–∞–º."
                    }
                ]
            },
            "–ò—Ç–∞–ª–∏—è": {
                coords: [42.5, 12.5],
                wines: [
                    {
                        type: "–∏–≥—Ä–∏—Å—Ç—ã–µ", color: "–¥—Ä—É–≥–æ–µ", name: "–ü—Ä–æ—Å–µ–∫–∫–æ",
                        producer: "Casa Defr√†", region: "–í–µ–Ω–µ—Ç–æ",
                        grape: "–ì–ª–µ—Ä–∞", sweetness: "–°—É—Ö–æ–µ", alcohol: "11%",
                        price: 1250, image: "prosecco_casa_defra.png",
                        description: "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–µ –∏—Ç–∞–ª—å—è–Ω—Å–∫–æ–µ –∏–≥—Ä–∏—Å—Ç–æ–µ. –¢–æ–Ω–∫–∞—è –ø–µ—Ä–ª—è–∂, –∞—Ä–æ–º–∞—Ç –≥—Ä—É—à–∏, —è–±–ª–æ–∫–∞ –∏ —Ü–≤–µ—Ç–æ–≤ –±–µ–ª–æ–π –∞–∫–∞—Ü–∏–∏. –°–≤–µ–∂–µ–µ, –ª–µ–≥–∫–æ–µ, —Å –º–∏–Ω–µ—Ä–∞–ª—å–Ω—ã–º —Ñ–∏–Ω–∏—à–µ–º. –û—Ç–ª–∏—á–Ω—ã–π –∞–ø–µ—Ä–∏—Ç–∏–≤ –∫ –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∞–º."
                    },
                    {
                        type: "–∫—Ä–∞—Å–Ω—ã–µ", color: "–∫—Ä–∞—Å–Ω–æ–µ", name: "–ö—å—è–Ω—Ç–∏",
                        producer: "Conti Serristori", region: "–¢–æ—Å–∫–∞–Ω–∞",
                        grape: "–°–∞–Ω–¥–∂–æ–≤–µ–∑–µ", sweetness: "–°—É—Ö–æ–µ", alcohol: "13%",
                        price: 1350, image: "chianti.png",
                        description: "–ó–Ω–∞–º–µ–Ω–∏—Ç–æ–µ —Ç–æ—Å–∫–∞–Ω—Å–∫–æ–µ –≤–∏–Ω–æ. –†—É–±–∏–Ω–æ–≤—ã–π —Ü–≤–µ—Ç, –∞—Ä–æ–º–∞—Ç –≤–∏—à–Ω–∏, —Å–ª–∏–≤—ã –∏ —Ç—Ä–∞–≤. –°—Ä–µ–¥–Ω–µ–µ —Ç–µ–ª–æ, —Å–≤–µ–∂–∞—è –∫–∏—Å–ª–æ—Ç–Ω–æ—Å—Ç—å, —Ç–∞–Ω–∏–Ω—ã —Å—Ä–µ–¥–Ω–∏–µ. –ö –ø–∞—Å—Ç–µ, –ø–∏—Ü—Ü–µ –∏ –º—è—Å–Ω—ã–º —Å–æ—É—Å–∞–º."
                    }
                ]
            },
            "–ì–µ—Ä–º–∞–Ω–∏—è": {
                coords: [51.0, 10.0],
                wines: [
                    {
                        type: "–∏–≥—Ä–∏—Å—Ç—ã–µ", color: "–¥—Ä—É–≥–æ–µ", name: "–†–∏—Å–ª–∏–Ω–≥ –ó–µ–∫—Ç –•–∞–Ω—Å –ë–∞–µ—Ä",
                        producer: "Hans Bauer", region: "–†–µ–π–Ω—Ö–µ—Å—Å–µ–Ω",
                        grape: "–†–∏—Å–ª–∏–Ω–≥", sweetness: "–°—É—Ö–æ–µ", alcohol: "12%",
                        price: 1650, image: "riesling_sekt_hans_bauer.png",
                        description: "–ù–µ–º–µ—Ü–∫–∏–π –∏–≥—Ä–∏—Å—Ç—ã–π –†–∏—Å–ª–∏–Ω–≥. –¢–æ–Ω–∫–∏–µ –ø—É–∑—ã—Ä—å–∫–∏, –∞—Ä–æ–º–∞—Ç —è–±–ª–æ–∫–∞, —Ü–∏—Ç—Ä—É—Å–æ–≤—ã—Ö –∏ –º–∏–Ω–µ—Ä–∞–ª–æ–≤. –°–≤–µ–∂–∏–π, —Å—É—Ö–æ–π, —Å –¥–æ–ª–≥–∏–º –ø–æ—Å–ª–µ–≤–∫—É—Å–∏–µ–º. –ö —Ä—ã–±–µ, –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∞–º –∏ –∞–∑–∏–∞—Ç—Å–∫–æ–π –∫—É—Ö–Ω–µ."
                    }
                ]
            },
            "–ê–≤—Å—Ç—Ä–∏—è": {
                coords: [47.5, 14.0],
                wines: [
                    {
                        type: "–±–µ–ª—ã–µ", color: "–±–µ–ª–æ–µ", name: "–®–ª–æ—Å—Å –ë–æ–∫—Ñ–ª–∏—Å—Å –ê–¥–µ–ª—å",
                        producer: "Schloss Bockflie√ü", region: "–ó–∞–ª—å—Ü–∫–∞–º–º–µ—Ä–≥—É—Ç",
                        grape: "–ì—Ä—é–Ω–µ—Ä –í–µ–ª—å—Ç–ª–∏–Ω–µ—Ä", sweetness: "–°—É—Ö–æ–µ", alcohol: "12.5%",
                        price: 1890, image: "schloss_bockfliess_adel.png",
                        description: "–≠–ª–µ–≥–∞–Ω—Ç–Ω–æ–µ –∞–≤—Å—Ç—Ä–∏–π—Å–∫–æ–µ –±–µ–ª–æ–µ. –ê—Ä–æ–º–∞—Ç –±–µ–ª—ã—Ö —Ü–≤–µ—Ç–æ–≤, —è–±–ª–æ–∫–∞ –∏ –±–µ–ª–æ–≥–æ –ø–µ—Ä—Ü–∞. –õ–µ–≥–∫–æ–µ —Ç–µ–ª–æ, –º–∏–Ω–µ—Ä–∞–ª—å–Ω–æ—Å—Ç—å, —Å–≤–µ–∂–∞—è –∫–∏—Å–ª–æ—Ç–Ω–æ—Å—Ç—å. –ö —Ä—ã–±–µ, –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∞–º –∏ –∞–≤—Å—Ç—Ä–∏–π—Å–∫–æ–π –∫—É—Ö–Ω–µ."
                    }
                ]
            },
            "–ò—Å–ø–∞–Ω–∏—è": {
                coords: [40.0, -4.0],
                wines: [
                    {
                        type: "–∏–≥—Ä–∏—Å—Ç—ã–µ", color: "–¥—Ä—É–≥–æ–µ", name: "–ö–∞–≤–∞ –î–æ—Å –ö–∞–ø—Ä–∏—á–æ—Å",
                        producer: "Dos Caprichos", region: "–ö–∞—Ç–∞–ª–æ–Ω–∏—è",
                        grape: "–ú–∞–∫–∞–±–µ–æ, –ü–∞—Ä–µ–ª—å—è–¥–∞, –®–∞—Ä–µ–ª–ª–æ", sweetness: "–ë—Ä—é—Ç", alcohol: "11.5%",
                        price: 920, image: "cava_dos_caprichos.png",
                        description: "–ò—Å–ø–∞–Ω—Å–∫–∞—è –∫–∞–≤–∞ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–º –º–µ—Ç–æ–¥–æ–º. –¢–æ–Ω–∫–∏–µ –ø—É–∑—ã—Ä—å–∫–∏, –∞—Ä–æ–º–∞—Ç —è–±–ª–æ–∫–∞, —Ü–∏—Ç—Ä—É—Å–æ–≤—ã—Ö –∏ –º–∏–Ω–µ—Ä–∞–ª–æ–≤. –°—É—Ö–∞—è, —Å–≤–µ–∂–∞—è, —Å –¥–æ–ª–≥–∏–º —Ñ–∏–Ω–∏—à–µ–º. –ö –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∞–º, –ø–∞—à—Ç–µ—Ç–∞–º –∏ –æ–≤–æ—â–Ω—ã–º –∑–∞–∫—É—Å–∫–∞–º."
                    },
                    {
                        type: "–∫—Ä–∞—Å–Ω—ã–µ", color: "–∫—Ä–∞—Å–Ω–æ–µ", name: "–ê—Å—å–µ–¥–∞ –¥–µ –ê—Ä–æ –ö—Ä–∏–∞–Ω—Å–∞ –†–∏–æ—Ö–∞",
                        producer: "Aseida de Aro", region: "–†–∏–æ—Ö–∞",
                        grape: "–¢–µ–º–ø—Ä–∞–Ω–∏–ª—å–æ", sweetness: "–°—É—Ö–æ–µ", alcohol: "13.5%",
                        price: 1380, image: "aseida_crianza_rioja.png",
                        description: "–í—ã–¥–µ—Ä–∂–∞–Ω–Ω–æ–µ –∫—Ä–∞—Å–Ω–æ–µ –≤–∏–Ω–æ –≤ –¥—É–±–µ 12 –º–µ—Å—è—Ü–µ–≤. –ê—Ä–æ–º–∞—Ç —á–µ—Ä–Ω–æ–π —Å–º–æ—Ä–æ–¥–∏–Ω—ã, –≤–∞–Ω–∏–ª–∏, –∫–æ–∂–∏ –∏ —Å–ø–µ—Ü–∏–π. –ü–æ–ª–Ω–æ–µ —Ç–µ–ª–æ, –º—è–≥–∫–∏–µ —Ç–∞–Ω–∏–Ω—ã. –ö —Å—Ç–µ–π–∫–∞–º, —è–≥–Ω—è—Ç–∏–Ω–µ –∏ –∑—Ä–µ–ª—ã–º —Å—ã—Ä–∞–º."
                    }
                ]
            },
            "–ê—Ä–≥–µ–Ω—Ç–∏–Ω–∞": {
                coords: [-38.0, -64.0],
                wines: [
                    {
                        type: "–∫—Ä–∞—Å–Ω—ã–µ", color: "–∫—Ä–∞—Å–Ω–æ–µ", name: "Demons & Angels Malbec",
                        producer: "Demons & Angels", region: "–ú–µ–Ω–¥–æ—Å–∞",
                        grape: "–ú–∞–ª—å–±–µ–∫", sweetness: "–°—É—Ö–æ–µ", alcohol: "14%",
                        price: 1280, image: "demons_angels_malbec.png",
                        description: "–ê—Ä–≥–µ–Ω—Ç–∏–Ω—Å–∫–∏–π –ú–∞–ª—å–±–µ–∫ –Ω–æ–≤–æ–≥–æ —Å–≤–µ—Ç–∞. –ì–ª—É–±–æ–∫–∏–π —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π —Ü–≤–µ—Ç, –∞—Ä–æ–º–∞—Ç —á–µ—Ä–Ω–æ–π —Å–º–æ—Ä–æ–¥–∏–Ω—ã, –≤–∞–Ω–∏–ª–∏ –∏ –∫–æ—Ñ–µ. –ü–æ–ª–Ω–æ—Ç–µ–ª–æ–µ, —Å –Ω–∞—Å—ã—â–µ–Ω–Ω—ã–º–∏ —Ç–∞–Ω–∏–Ω–∞–º–∏. –ö —Å—Ç–µ–π–∫–∞–º, –±–∞—Ä–±–µ–∫—é –∏ –¥–∏—á–∏."
                    }
                ]
            },
            "–ß–∏–ª–∏": {
                coords: [-35.0, -71.0],
                wines: [
                    {
                        type: "–±–µ–ª—ã–µ", color: "–±–µ–ª–æ–µ", name: "Santa Carolina Sauvignon Blanc",
                        producer: "Santa Carolina", region: "–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –¥–æ–ª–∏–Ω–∞",
                        grape: "–°–æ–≤–∏–Ω—å–æ–Ω –ë–ª–∞–Ω", sweetness: "–°—É—Ö–æ–µ", alcohol: "12.5%",
                        price: 850, image: "santa_carolina_sauvignon.png",
                        description: "–ß–∏–ª–∏–π—Å–∫–æ–µ –±–µ–ª–æ–µ –≤–∏–Ω–æ. –ê—Ä–æ–º–∞—Ç —Ç—Ä–∞–≤, —Ü–∏—Ç—Ä—É—Å–æ–≤—ã—Ö –∏ —Ç—Ä–æ–ø–∏—á–µ—Å–∫–∏—Ö —Ñ—Ä—É–∫—Ç–æ–≤. –°–≤–µ–∂–∏–π, –º–∏–Ω–µ—Ä–∞–ª—å–Ω—ã–π, —Å —Ö–æ—Ä–æ—à–µ–π –∫–∏—Å–ª–æ—Ç–Ω–æ—Å—Ç—å—é. –ö —Ä—ã–±–µ, –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∞–º, —Å–∞–ª–∞—Ç–∞–º –∏ –æ–≤–æ—â–Ω—ã–º –±–ª—é–¥–∞–º."
                    }
                ]
            },
            "–ê–≤—Å—Ç—Ä–∞–ª–∏—è": {
                coords: [-35.0, 149.0],
                wines: [
                    {
                        type: "–∫—Ä–∞—Å–Ω—ã–µ", color: "–∫—Ä–∞—Å–Ω–æ–µ", name: "Old Bin Track Cabernet Sauvignon",
                        producer: "Old Bin Track", region: "–Æ–∂–Ω–∞—è –ê–≤—Å—Ç—Ä–∞–ª–∏—è",
                        grape: "–ö–∞–±–µ—Ä–Ω–µ –°–æ–≤–∏–Ω—å–æ–Ω", sweetness: "–°—É—Ö–æ–µ", alcohol: "14.5%",
                        price: 1420, image: "old_bin_track_cabernet.png",
                        description: "–ö—Ä–µ–ø–∫–æ–µ –∞–≤—Å—Ç—Ä–∞–ª–∏–π—Å–∫–æ–µ –∫—Ä–∞—Å–Ω–æ–µ. –ê—Ä–æ–º–∞—Ç —á–µ—Ä–Ω–æ–π —Å–º–æ—Ä–æ–¥–∏–Ω—ã, –∫–µ–¥—Ä–∞, –≤–∞–Ω–∏–ª–∏ –∏ —Å–ø–µ—Ü–∏–π. –ü–æ–ª–Ω–æ—Ç–µ–ª–æ–µ, —Å –º–æ—â–Ω—ã–º–∏ —Ç–∞–Ω–∏–Ω–∞–º–∏. –ö —Å—Ç–µ–π–∫–∞–º, –±–∞—Ä–±–µ–∫—é –∏ –∑—Ä–µ–ª—ã–º —Å—ã—Ä–∞–º."
                    }
                ]
            },
            "–ê—Ä–º–µ–Ω–∏—è": {
                coords: [40.0, 45.0],
                wines: [
                    {
                        type: "–ø–ª–æ–¥–æ–≤—ã–µ", color: "–¥—Ä—É–≥–æ–µ", name: "–•–æ–≥–∏ –ì—Ä–∞–Ω–∞—Ç–æ–≤–æ–µ",
                        producer: "Hogi", region: "–ê—Ä–∞—Ä–∞—Ç—Å–∫–∞—è –¥–æ–ª–∏–Ω–∞",
                        grape: "–ì—Ä–∞–Ω–∞—Ç", sweetness: "–ü–æ–ª—É—Å–ª–∞–¥–∫–æ–µ", alcohol: "12%",
                        price: 590, image: "hogi_granat.png",
                        description: "–ü–ª–æ–¥–æ–≤–æ–µ –≤–∏–Ω–æ –∏–∑ –≥—Ä–∞–Ω–∞—Ç–∞. –ù–∞—Å—ã—â–µ–Ω–Ω—ã–π —Ä—É–±–∏–Ω–æ–≤—ã–π —Ü–≤–µ—Ç, –∞—Ä–æ–º–∞—Ç –≥—Ä–∞–Ω–∞—Ç–∞, —è–≥–æ–¥ –∏ —Å–ø–µ—Ü–∏–π. –ü–æ–ª—É—Å–ª–∞–¥–∫–æ–µ, —Å –æ—Å–≤–µ–∂–∞—é—â–µ–π –∫–∏—Å–ª–æ—Ç–Ω–æ—Å—Ç—å—é. –ö –¥–µ—Å–µ—Ä—Ç–∞–º, —Ñ—Ä—É–∫—Ç–∞–º –∏ –æ—Å—Ç—Ä—ã–º –±–ª—é–¥–∞–º."
                    }
                ]
            }
        };

        // ==========================================
        // –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï
        // ==========================================
        let map;
        let currentFilters = { country: 'all', color: 'all', sweetness: 'all', minPrice: 0, maxPrice: 5000 };
        let selectedCountry = null;
        let isMobile = window.innerWidth <= 768;
        let markers = [];
        let panelState = 'collapsed';

        // ==========================================
        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï
        // ==========================================
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üç∑ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã –≤–∏–Ω–∞...');
            initMap();
            initTopFilters();
            initSwipePanel();
            initEventListeners();
            generateCountryFilterButtons();
        });

        // ==========================================
        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ö–ê–†–¢–´
        // ==========================================
        function initMap() {
            try {
                if (typeof L === 'undefined') throw new Error('Leaflet –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
                
                map = L.map('map', {
                    zoomControl: true,
                    attributionControl: false,
                    minZoom: 2,
                    maxZoom: 18,
                    worldCopyJump: true
                }).setView([30, 0], 2);

                if (!navigator.onLine) {
                    showError('–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ');
                    return;
                }

                const tileLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '',
                    timeout: 5000
                });

                tileLayer.on('tileerror', (error) => console.warn('–û—à–∏–±–∫–∞ —Ç–∞–π–ª–∞:', error));
                tileLayer.addTo(map);
                console.log('‚úÖ –ö–∞—Ä—Ç–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');

                createMarkers();
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –∫–∞—Ä—Ç—ã:', error);
                showError(error.message);
            }
        }

        // ==========================================
        // –°–û–ó–î–ê–ù–ò–ï –ú–ê–†–ö–ï–†–û–í
        // ==========================================
        function createMarkers() {
            try {
                Object.entries(wineData).forEach(([country, data]) => {
                    const marker = L.marker(data.coords, {
                        icon: L.divIcon({
                            className: 'custom-div-icon',
                            html: `<div class="custom-marker">${data.wines.length}</div>`,
                            iconSize: [44, 44], iconAnchor: [22, 22],
                            popupAnchor: [0, -20]
                        })
                    });

                    marker.on('click', () => selectCountry(country));
                    marker.bindPopup(`
                        <div style="text-align: center; padding: 8px; font-family: Montserrat, sans-serif;">
                            <strong style="color: #722f37; font-size: 1.1rem;">${country}</strong><br>
                            <span style="color: #6d5d4b;">${data.wines.length} –≤–∏–Ω(–∞)</span>
                        </div>
                    `);
                    
                    marker.addTo(map);
                    markers.push(marker);
                });
                console.log('‚úÖ –ú–∞—Ä–∫–µ—Ä—ã —Å–æ–∑–¥–∞–Ω—ã:', markers.length);
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –º–∞—Ä–∫–µ—Ä–æ–≤:', error);
            }
        }

        // ==========================================
        // –ì–ï–ù–ï–†–ê–¶–ò–Ø –ö–ù–û–ü–û–ö –°–¢–†–ê–ù –î–õ–Ø –§–ò–õ–¨–¢–†–û–í
        // ==========================================
        function generateCountryFilterButtons() {
            const container = document.getElementById('countryFilters');
            if (!container) return;
            
            // –û—á–∏—â–∞–µ–º, –æ—Å—Ç–∞–≤–ª—è—è –∫–Ω–æ–ø–∫—É "–í—Å–µ —Å—Ç—Ä–∞–Ω—ã"
            container.innerHTML = '<button class="filter-btn active" data-filter-type="country" data-filter-value="all">–í—Å–µ —Å—Ç—Ä–∞–Ω—ã</button>';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω—ã
            Object.keys(wineData).sort().forEach(country => {
                const btn = document.createElement('button');
                btn.className = 'filter-btn';
                btn.dataset.filterType = 'country';
                btn.dataset.filterValue = country;
                btn.textContent = country;
                container.appendChild(btn);
            });
        }

        // ==========================================
        // –í–ï–†–•–ù–ò–ï –§–ò–õ–¨–¢–†–´ (–ë–£–†–ì–ï–†-–ú–ï–ù–Æ)
        // ==========================================
        function initTopFilters() {
            // –ö–Ω–æ–ø–∫–∞-–±—É—Ä–≥–µ—Ä
            const burger = document.getElementById('filterBurger');
            if (burger) {
                burger.addEventListener('click', toggleFiltersPanel);
            }
            
            // –¶–µ–Ω–æ–≤–æ–π —Å–ª–∞–π–¥–µ—Ä
            const minPrice = document.getElementById('minPrice');
            const maxPrice = document.getElementById('maxPrice');
            const minLabel = document.getElementById('minPriceLabel');
            const maxLabel = document.getElementById('maxPriceLabel');
            
            if (minPrice && minLabel) {
                minPrice.addEventListener('input', (e) => {
                    currentFilters.minPrice = parseInt(e.target.value);
                    minLabel.textContent = e.target.value + ' ‚ÇΩ';
                    applyTopFilters();
                });
            }
            
            if (maxPrice && maxLabel) {
                maxPrice.addEventListener('input', (e) => {
                    currentFilters.maxPrice = parseInt(e.target.value);
                    maxLabel.textContent = e.target.value + ' ‚ÇΩ';
                    applyTopFilters();
                });
            }
        }

        function toggleFiltersPanel() {
            const panel = document.getElementById('filtersPanel');
            const burger = document.getElementById('filterBurger');
            
            panel.classList.toggle('active');
            burger.classList.toggle('active');
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –ø–∞–Ω–µ–ª–∏
            if (panel.classList.contains('active')) {
                setTimeout(() => {
                    document.addEventListener('click', closeFiltersPanelOutside);
                }, 100);
            }
        }

        function closeFiltersPanelOutside(e) {
            const panel = document.getElementById('filtersPanel');
            const burger = document.getElementById('filterBurger');
            
            if (!panel.contains(e.target) && !burger.contains(e.target)) {
                panel.classList.remove('active');
                burger.classList.remove('active');
                document.removeEventListener('click', closeFiltersPanelOutside);
            }
        }

        // ==========================================
        // –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –§–ò–õ–¨–¢–†–û–í –ö –ö–ê–†–¢–ï
        // ==========================================
        function applyTopFilters() {
            // –û—á–∏—â–∞–µ–º –∫–∞—Ä—Ç—É
            markers.forEach(marker => marker.remove());
            markers = [];
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –∫–∞–∫–∏–µ —Å—Ç—Ä–∞–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å
            let countriesToShow = [];
            
            if (currentFilters.country !== 'all') {
                // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Å—Ç—Ä–∞–Ω–∞ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—ë
                if (wineData[currentFilters.country]) {
                    countriesToShow = [currentFilters.country];
                }
            } else {
                // –ò–Ω–∞—á–µ —Ñ–∏–ª—å—Ç—Ä—É–µ–º –ø–æ —Ü–≤–µ—Ç—É, —Å–ª–∞–¥–æ—Å—Ç–∏ –∏ —Ü–µ–Ω–µ
                countriesToShow = Object.entries(wineData).filter(([country, data]) => {
                    const hasMatchingWines = data.wines.some(wine => {
                        const colorMatch = currentFilters.color === 'all' || wine.color === currentFilters.color;
                        const sweetnessMatch = currentFilters.sweetness === 'all' || wine.sweetness === currentFilters.sweetness;
                        const priceMatch = wine.price >= currentFilters.minPrice && wine.price <= currentFilters.maxPrice;
                        return colorMatch && sweetnessMatch && priceMatch;
                    });
                    return hasMatchingWines;
                }).map(([country]) => country);
            }
            
            // –°–æ–∑–¥–∞–µ–º –º–∞—Ä–∫–µ—Ä—ã –¥–ª—è –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω
            countriesToShow.forEach(country => {
                const data = wineData[country];
                const marker = L.marker(data.coords, {
                    icon: L.divIcon({
                        className: 'custom-div-icon',
                        html: `<div class="custom-marker">${data.wines.length}</div>`,
                        iconSize: [44, 44], iconAnchor: [22, 22],
                        popupAnchor: [0, -20]
                    })
                });
                
                marker.on('click', () => selectCountry(country));
                marker.bindPopup(`
                    <div style="text-align: center; padding: 8px; font-family: Montserrat, sans-serif;">
                        <strong style="color: #722f37;">${country}</strong><br>
                        <span style="color: #6d5d4b;">${data.wines.length} –≤–∏–Ω(–∞)</span>
                    </div>
                `);
                marker.addTo(map);
                markers.push(marker);
            });
            
            console.log('üìç –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω:', countriesToShow.length);
        }

        // ==========================================
        // –í–´–ë–û–† –°–¢–†–ê–ù–´
        // ==========================================
        function selectCountry(country) {
            selectedCountry = country;
            
            if (isMobile) {
                openMobilePanel(country);
            } else {
                renderDesktopPanel(country);
            }

            const coords = wineData[country].coords;
            map.setView(coords, Math.max(map.getZoom(), 4), {
                animate: true,
                duration: 0.5
            });
        }

        // ==========================================
        // –°–í–ê–ô–ü –ü–ê–ù–ï–õ–ò
        // ==========================================
        function initSwipePanel() {
            const panel = document.getElementById('winePanelMobile');
            const handle = panel.querySelector('.mobile-handle');
            
            if (!handle) return;
            
            let startY = 0;
            let currentY = 0;
            let isDragging = false;
            
            const startDrag = (e) => {
                isDragging = true;
                startY = e.type.includes('touch') ? e.touches[0].clientY : e.clientY;
                panel.style.transition = 'none';
                const rect = panel.getBoundingClientRect();
                panelStartY = rect.top;
                e.preventDefault();
            };
            
            const drag = (e) => {
                if (!isDragging) return;
                currentY = e.type.includes('touch') ? e.touches[0].clientY : e.clientY;
                const deltaY = currentY - startY;
                const newTop = panelStartY + deltaY;
                
                const maxTop = 0;
                const minTop = window.innerHeight * 0.35;
                
                if (newTop >= maxTop && newTop <= minTop) {
                    panel.style.transform = `translateY(${newTop}px)`;
                }
            };
            
            const endDrag = (e) => {
                if (!isDragging) return;
                isDragging = false;
                
                const deltaY = currentY - startY;
                const threshold = 100;
                
                panel.style.transition = 'transform 0.3s ease-in-out';
                
                if (deltaY < -threshold && panelState !== 'expanded') {
                    panel.classList.add('expanded');
                    panelState = 'expanded';
                    panel.style.transform = 'translateY(0)';
                } else if (deltaY > threshold && panelState !== 'collapsed') {
                    closeMobilePanel();
                } else {
                    panel.style.transform = '';
                    panel.classList.remove('expanded');
                    panelState = 'normal';
                }
            };
            
            handle.addEventListener('mousedown', startDrag);
            handle.addEventListener('touchstart', startDrag);
            document.addEventListener('mousemove', drag);
            document.addEventListener('touchmove', drag);
            document.addEventListener('mouseup', endDrag);
            document.addEventListener('touchend', endDrag);
        }

        // ==========================================
        // –û–¢–ö–†–´–¢–ò–ï/–ó–ê–ö–†–´–¢–ò–ï –ü–ê–ù–ï–õ–ò
        // ==========================================
        function openMobilePanel(country) {
            try {
                const panel = document.getElementById('winePanelMobile');
                const overlay = document.getElementById('overlay');
                const placeholder = document.getElementById('placeholderMobile');
                
                selectedCountry = country;
                panelState = 'normal';
                
                generateDynamicFilters(country);
                renderMobileWineList(country);
                
                panel.classList.add('active');
                panel.classList.remove('expanded');
                overlay.classList.add('active');
                placeholder.style.display = 'none';
                
                panel.style.transform = '';
                panel.scrollTop = 0;
                
                console.log('üì± –ü–∞–Ω–µ–ª—å –æ—Ç–∫—Ä—ã—Ç–∞ –¥–ª—è:', country);
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–∏:', error);
            }
        }

        function closeMobilePanel() {
            const panel = document.getElementById('winePanelMobile');
            const overlay = document.getElementById('overlay');
            
            panel.classList.remove('active', 'expanded');
            overlay.classList.remove('active');
            selectedCountry = null;
            panelState = 'collapsed';
            
            currentFilters = { country: 'all', color: 'all', sweetness: 'all', minPrice: 0, maxPrice: 5000 };
            
            console.log('üì± –ü–∞–Ω–µ–ª—å –∑–∞–∫—Ä—ã—Ç–∞');
        }

        // ==========================================
        // –î–ò–ù–ê–ú–ò–ß–ï–°–ö–ò–ï –§–ò–õ–¨–¢–†–´ –í –ü–ê–ù–ï–õ–ò
        // ==========================================
        function generateDynamicFilters(country) {
            const container = document.getElementById('filtersContainer');
            const wines = wineData[country].wines;
            
            const colors = new Set();
            const sweetnesses = new Set();
            
            wines.forEach(wine => {
                colors.add(wine.color);
                sweetnesses.add(wine.sweetness);
            });
            
            let html = '';
            
            if (colors.size > 1) {
                html += `
                    <div class="filter-section">
                        <h4>–¶–≤–µ—Ç</h4>
                        <div class="filter-buttons">
                            <button class="filter-btn active" data-filter-type="color" data-filter-value="all">–í—Å–µ</button>
                `;
                const colorLabels = { '–∫—Ä–∞—Å–Ω–æ–µ': '–ö—Ä–∞—Å–Ω–æ–µ', '–±–µ–ª–æ–µ': '–ë–µ–ª–æ–µ', '–¥—Ä—É–≥–æ–µ': '–î—Ä—É–≥–æ–µ' };
                Array.from(colors).sort().forEach(color => {
                    if (colorLabels[color]) {
                        html += `<button class="filter-btn" data-filter-type="color" data-filter-value="${color}">${colorLabels[color]}</button>`;
                    }
                });
                html += `</div></div>`;
            }
            
            if (sweetnesses.size > 1) {
                html += `
                    <div class="filter-section">
                        <h4>–°–ª–∞–¥–æ—Å—Ç—å</h4>
                        <div class="filter-buttons">
                            <button class="filter-btn active" data-filter-type="sweetness" data-filter-value="all">–í—Å–µ</button>
                `;
                Array.from(sweetnesses).sort().forEach(sweetness => {
                    html += `<button class="filter-btn" data-filter-type="sweetness" data-filter-value="${sweetness}">${sweetness}</button>`;
                });
                html += `</div></div>`;
            }
            
            container.innerHTML = html;
        }

        // ==========================================
        // –†–ï–ù–î–ï–†–ò–ù–ì –°–ü–ò–°–ö–ê –í–ò–ù
        // ==========================================
        function renderMobileWineList(country) {
            const container = document.getElementById('wineListMobile');
            container.innerHTML = generateFilteredWineHTML(country, 'wineListMobile');
            container.style.display = 'block';
        }

        function renderDesktopPanel(country) {
            // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–Ω–æ–π –≤–µ—Ä—Å–∏–∏
            console.log('üñ•Ô∏è –î–µ—Å–∫—Ç–æ–ø–Ω–∞—è –ø–∞–Ω–µ–ª—å –¥–ª—è:', country);
        }

        // ==========================================
        // –§–ò–õ–¨–¢–†–ê–¶–ò–Ø –í–ò–ù
        // ==========================================
        function filterWines(wines) {
            return wines.filter(wine => {
                // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º currentFilters.country, —Ç–∞–∫ –∫–∞–∫ –≤–∏–Ω–æ —É–∂–µ –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω—ã
                const colorMatch = currentFilters.color === 'all' || wine.color === currentFilters.color;
                const sweetnessMatch = currentFilters.sweetness === 'all' || wine.sweetness === currentFilters.sweetness;
                const priceMatch = wine.price >= currentFilters.minPrice && wine.price <= currentFilters.maxPrice;
                return colorMatch && sweetnessMatch && priceMatch;
            });
        }

        // ==========================================
        // –ì–ï–ù–ï–†–ê–¶–ò–Ø HTML –î–õ–Ø –û–¢–§–ò–õ–¨–¢–†–û–í–ê–ù–ù–´–• –í–ò–ù
        // ==========================================
        function generateFilteredWineHTML(country, containerId) {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
            if (!wineData[country] || !wineData[country].wines) {
                console.error(`‚ùå –î–∞–Ω–Ω—ã–µ –æ –≤–∏–Ω–∞—Ö –¥–ª—è —Å—Ç—Ä–∞–Ω—ã "${country}" –Ω–µ –Ω–∞–π–¥–µ–Ω—ã`);
                return `<div class="placeholder"><p>–û—à–∏–±–∫–∞: –¥–∞–Ω–Ω—ã–µ –æ –≤–∏–Ω–∞—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p></div>`;
            }
            
            const allWines = wineData[country].wines;
            const filteredWines = filterWines(allWines);
            
            if (filteredWines.length === 0) {
                return `
                    <div class="placeholder">
                        <i class="fas fa-filter" style="color: #d4b483;"></i>
                        <p>–ù–µ—Ç –≤–∏–Ω –ø–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ñ–∏–ª—å—Ç—Ä–∞–º</p>
                        <button class="filter-btn" onclick="resetCountryFilters()" style="margin-top: 15px;">–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
                    </div>
                `;
            }
            
            let html = `<div class="country-section">`;
            html += `<div class="country-title">
                        <i class="fas fa-flag"></i> ${country}
                     </div>`;
            
            const grouped = {};
            filteredWines.forEach(wine => {
                const groupKey = wine.type === '–ø–ª–æ–¥–æ–≤—ã–µ' ? '–ø–ª–æ–¥–æ–≤—ã–µ' : wine.color;
                if (!grouped[groupKey]) grouped[groupKey] = [];
                grouped[groupKey].push(wine);
            });
            
            const groupLabels = {
                '–∫—Ä–∞—Å–Ω–æ–µ': '–ö—Ä–∞—Å–Ω—ã–µ –≤–∏–Ω–∞',
                '–±–µ–ª–æ–µ': '–ë–µ–ª—ã–µ –≤–∏–Ω–∞',
                '–¥—Ä—É–≥–æ–µ': '–î—Ä—É–≥–∏–µ –≤–∏–Ω–∞',
                '–ø–ª–æ–¥–æ–≤—ã–µ': '–ü–ª–æ–¥–æ–≤—ã–µ –≤–∏–Ω–∞'
            };
            
            Object.entries(grouped).sort().forEach(([groupKey, wines]) => {
                const iconClass = getIconClass(groupKey);
                html += `<div class="wine-category">
                            <div class="category-title">
                                <i class="fas fa-wine-bottle ${iconClass}"></i>
                                ${groupLabels[groupKey] || groupKey}
                            </div>`;
                
                wines.forEach((wine, index) => {
                    const cardId = `${containerId}-${country}-${groupKey}-${index}`;
                    const imagePath = wine.image || 'no_image.png';
                    
                    html += `<div class="wine-card" onclick="toggleDetails('${cardId}')">
                                <div class="wine-image">
                                    <img src="${imagePath}" alt="${wine.name}" onerror="this.onerror=null; this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA2MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjYwIiBoZWlnaHQ9IjgwIiByeD0iOCIgZmlsbD0iI2U4ZGRkNCIvPgo8cGF0aCBkPSJNMzAgNDBMMTggNTJIMTQ0VjI4TDMwIDQwWiIgZmlsbD0iIzhhNzQ2MiIvPgo8cGF0aCBkPSJNMTggNTJMMzAgNjRMNDIgNTJIMThaIiBmaWxsPSIjOGE3NDYyIi8+Cjwvc3ZnPg==';">
                                </div>
                                <div class="wine-info">
                                    <div class="wine-name">${wine.name}</div>`;
                    
                    if (wine.producer) {
                        html += `<div class="wine-producer">${wine.producer}</div>`;
                    }
                    
                    html += `<div class="wine-region">
                                <i class="fas fa-map-pin"></i> ${wine.region}
                            </div>
                            <div class="wine-stats">
                                <span class="wine-sweetness">${wine.sweetness}</span>
                                <span class="wine-alcohol">${wine.alcohol}</span>
                                <span class="wine-price">${wine.price} ‚ÇΩ</span>
                            </div>
                            <div class="wine-description">${wine.description}</div>
                            <div class="wine-details" id="${cardId}">
                                <div class="detail-item">
                                    <strong>–°–æ—Ä—Ç:</strong> ${wine.grape}
                                </div>
                                <div class="detail-item">
                                    <strong>–°—Ç–∏–ª—å:</strong> ${wine.sweetness}
                                </div>
                                <div class="detail-item">
                                    <strong>–ö—Ä–µ–ø–æ—Å—Ç—å:</strong> ${wine.alcohol}
                                </div>
                                <div class="detail-item">
                                    <strong>–¶–µ–Ω–∞:</strong> ${wine.price} ‚ÇΩ
                                </div>
                            </div>
                        </div>
                    </div>`;
                });
                
                html += `</div>`;
            });
            
            html += `</div>`;
            return html;
        }

        // ==========================================
        // –û–°–¢–ê–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò
        // ==========================================
        function getIconClass(groupKey) {
            const icons = {
                "–∫—Ä–∞—Å–Ω–æ–µ": "icon-red",
                "–±–µ–ª–æ–µ": "icon-white",
                "–¥—Ä—É–≥–æ–µ": "icon-orange",
                "–ø–ª–æ–¥–æ–≤—ã–µ": "icon-fruit",
                "–∏–≥—Ä–∏—Å—Ç—ã–µ": "icon-sparkling",
                "–æ—Ä–∞–Ω–∂–µ–≤—ã–µ": "icon-orange",
                "—Ä–æ–∑–æ–≤—ã–µ": "icon-rose"
            };
            return icons[groupKey] || "icon-nonalc";
        }

        window.toggleDetails = function(cardId) {
            const details = document.getElementById(cardId);
            if (details) details.classList.toggle('active');
        };

        function resetCountryFilters() {
            currentFilters.color = 'all';
            currentFilters.sweetness = 'all';
            if (selectedCountry) {
                generateDynamicFilters(selectedCountry);
                renderMobileWineList(selectedCountry);
            }
        }

        window.resetAllFilters = function() {
            currentFilters = { country: 'all', color: 'all', sweetness: 'all', minPrice: 0, maxPrice: 5000 };
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.filterValue === 'all') {
                    btn.classList.add('active');
                }
            });
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–ª–∞–π–¥–µ—Ä—ã
            const minPrice = document.getElementById('minPrice');
            const maxPrice = document.getElementById('maxPrice');
            const minLabel = document.getElementById('minPriceLabel');
            const maxLabel = document.getElementById('maxPriceLabel');
            
            if (minPrice) minPrice.value = 0;
            if (maxPrice) maxPrice.value = 5000;
            if (minLabel) minLabel.textContent = '0 ‚ÇΩ';
            if (maxLabel) maxLabel.textContent = '5000 ‚ÇΩ';
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤
            const panel = document.getElementById('filtersPanel');
            const burger = document.getElementById('filterBurger');
            if (panel) panel.classList.remove('active');
            if (burger) burger.classList.remove('active');
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä—ã
            applyTopFilters();
        };

        function showError(message) {
            console.error('‚ùå', message);
            document.getElementById('errorMessage').classList.add('active');
        }

        // ==========================================
        // –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô
        // ==========================================
        function initEventListeners() {
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ –Ω–∞ —Ñ–∏–ª—å—Ç—Ä—ã –≤ –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é
            const filtersPanel = document.getElementById('filtersPanel');
            if (filtersPanel) {
                filtersPanel.addEventListener('click', handleFilterClick);
            }
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ –Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤ –º–æ–±–∏–ª—å–Ω–æ–π –ø–∞–Ω–µ–ª–∏
            const filtersContainer = document.getElementById('filtersContainer');
            if (filtersContainer) {
                filtersContainer.addEventListener('click', handleFilterClick);
            }
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–∞–Ω–µ–ª–∏ –ø–æ –∫–ª–∏–∫—É –Ω–∞ –æ–≤–µ—Ä–ª–µ–π
            const overlay = document.getElementById('overlay');
            if (overlay) {
                overlay.addEventListener('click', closeMobilePanel);
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Ä–µ—Å–∞–π–∑–µ
            window.addEventListener('resize', () => {
                const newIsMobile = window.innerWidth <= 768;
                if (isMobile !== newIsMobile) {
                    isMobile = newIsMobile;
                    if (map) map.invalidateSize();
                    if (!isMobile && selectedCountry) {
                        closeMobilePanel();
                    }
                }
            });
            
            console.log('‚úÖ –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã');
        }

        function handleFilterClick(e) {
            if (e.target.classList.contains('filter-btn')) {
                const filterType = e.target.dataset.filterType;
                const filterValue = e.target.dataset.filterValue;
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å–µ–¥–Ω–∏–µ –∫–Ω–æ–ø–∫–∏
                const siblingButtons = e.target.parentNode.querySelectorAll('.filter-btn');
                siblingButtons.forEach(b => b.classList.remove('active'));
                
                // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º —Ç–µ–∫—É—â—É—é
                e.target.classList.add('active');
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã
                currentFilters[filterType] = filterValue;
                
                // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä—ã
                if (filterType === 'country') {
                    applyTopFilters();
                }
                
                // –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–∞ –ø–∞–Ω–µ–ª—å —Å—Ç—Ä–∞–Ω—ã - –æ–±–Ω–æ–≤–ª—è–µ–º –µ—ë —Ç–æ–∂–µ
                if (selectedCountry && isMobile) {
                    generateDynamicFilters(selectedCountry);
                    renderMobileWineList(selectedCountry);
                }
            }
        }
    </script>
</body>
</html>